name: Free RDP

on:
  workflow_dispatch:

jobs:
  rdp:
    runs-on: windows-latest

    steps:
    - name: 🔐 Set RDP password
      run: net user runneradmin admin@123

    - name: 🔌 Start Playit tunnel
      run: |
        iwr -Uri https://playit-cloud.github.io/Windows/Playit.exe -OutFile playit.exe
        .\playit.exe authtoken ${{ secrets.PLAYIT_AUTH }}

    - name: 🕒 Keep session alive
      run: timeout /t 3600

